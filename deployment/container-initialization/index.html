<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Obsidian vault to MkDocs Material Theme site generator with AI integration"><meta name=author content="Obelisk Team"><link href=https://usrbinkat.github.io/obelisk/deployment/container-initialization/ rel=canonical><link rel=icon href=../../assets/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.11"><title>Container Initialization and Testing - Obelisk</title><link rel=stylesheet href=../../assets/stylesheets/main.4af4bdda.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script> <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=deep-purple data-md-color-accent=deep-orange> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#obelisk-container-initialization-and-testing-guide class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <a href=https://github.com/usrbinkat/obelisk> <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg></span> <strong>Obelisk v0.1.0 </strong>&nbsp;released - Start your Obelisk now </a> </div> </aside> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> <div class="md-banner__inner md-grid md-typeset"> You're viewing an outdated version of this documentation. <a href=../../..> <strong>Click here to go to the latest version.</strong> </a> </div> <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script> </aside> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title=Obelisk class="md-header__button md-logo" aria-label=Obelisk data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Obelisk </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Container Initialization and Testing </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=deep-purple data-md-color-accent=deep-orange aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=deep-purple data-md-color-accent=deep-orange aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/usrbinkat/obelisk title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> usrbinkat/obelisk </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../cloud/Cloud%20Native%20Tooling/ class=md-tabs__link> Cloud </a> </li> <li class=md-tabs__item> <a href=../../chatbot/ class=md-tabs__link> Chatbot </a> </li> <li class=md-tabs__item> <a href=../../customization/ class=md-tabs__link> Customization </a> </li> <li class=md-tabs__item> <a href=../../development/ class=md-tabs__link> Development </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=Obelisk class="md-nav__button md-logo" aria-label=Obelisk data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg> </a> Obelisk </label> <div class=md-nav__source> <a href=https://github.com/usrbinkat/obelisk title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> usrbinkat/obelisk </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Cloud </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Cloud </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../cloud/Cloud%20Native%20Tooling/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <div class="md-nav__link md-nav__container"> <a href=../../chatbot/ class="md-nav__link "> <span class=md-ellipsis> Chatbot </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Chatbot </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../chatbot/architecture/ class=md-nav__link> <span class=md-ellipsis> Architecture Diagram </span> </a> </li> <li class=md-nav__item> <a href=../../chatbot/models/ class=md-nav__link> <span class=md-ellipsis> Models Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../chatbot/integration/ class=md-nav__link> <span class=md-ellipsis> Documentation Integration </span> </a> </li> <li class=md-nav__item> <a href=../../chatbot/openwebui/ class=md-nav__link> <span class=md-ellipsis> Open WebUI Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../chatbot/litellm-integration/ class=md-nav__link> <span class=md-ellipsis> LiteLLM Integration </span> </a> </li> <li class=md-nav__item> <a href=../../chatbot/containerization/ class=md-nav__link> <span class=md-ellipsis> Containerization Architecture </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_8> <div class="md-nav__link md-nav__container"> <a href=../../chatbot/rag/ class="md-nav__link "> <span class=md-ellipsis> RAG Pipeline </span> </a> <label class="md-nav__link " for=__nav_3_8 id=__nav_3_8_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_8_label aria-expanded=false> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> RAG Pipeline </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../chatbot/rag/getting-started/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../chatbot/rag/architecture-draft/ class=md-nav__link> <span class=md-ellipsis> Architecture Design </span> </a> </li> <li class=md-nav__item> <a href=../../chatbot/rag/implementation-status/ class=md-nav__link> <span class=md-ellipsis> Implementation Status </span> </a> </li> <li class=md-nav__item> <a href=../../chatbot/rag/implementation/ class=md-nav__link> <span class=md-ellipsis> Implementation Guide </span> </a> </li> <li class=md-nav__item> <a href=../../chatbot/rag/using-rag/ class=md-nav__link> <span class=md-ellipsis> Using RAG </span> </a> </li> <li class=md-nav__item> <a href=../../chatbot/rag/vector-database/ class=md-nav__link> <span class=md-ellipsis> Vector Database </span> </a> </li> <li class=md-nav__item> <a href=../../chatbot/rag/query-pipeline/ class=md-nav__link> <span class=md-ellipsis> Query Pipeline </span> </a> </li> <li class=md-nav__item> <a href=../../chatbot/rag/ollama-integration/ class=md-nav__link> <span class=md-ellipsis> Ollama Integration </span> </a> </li> <li class=md-nav__item> <a href=../../chatbot/rag/openwebui-integration/ class=md-nav__link> <span class=md-ellipsis> OpenWebUI Integration </span> </a> </li> <li class=md-nav__item> <a href=../../chatbot/rag/milvus/integration/ class=md-nav__link> <span class=md-ellipsis> Milvus Integration </span> </a> </li> <li class=md-nav__item> <a href=../../chatbot/rag/openai/integration/ class=md-nav__link> <span class=md-ellipsis> OpenAI Integration </span> </a> </li> <li class=md-nav__item> <a href=../../chatbot/rag/evaluation/ class=md-nav__link> <span class=md-ellipsis> Evaluation </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4> <div class="md-nav__link md-nav__container"> <a href=../../customization/ class="md-nav__link "> <span class=md-ellipsis> Customization </span> </a> <label class="md-nav__link " for=__nav_4 id=__nav_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Customization </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../customization/mkdocs-configuration/ class=md-nav__link> <span class=md-ellipsis> MkDocs Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../customization/css/ class=md-nav__link> <span class=md-ellipsis> CSS Styling </span> </a> </li> <li class=md-nav__item> <a href=../../customization/html/ class=md-nav__link> <span class=md-ellipsis> HTML Templates </span> </a> </li> <li class=md-nav__item> <a href=../../customization/javascript/ class=md-nav__link> <span class=md-ellipsis> JavaScript </span> </a> </li> <li class=md-nav__item> <a href=../../customization/python/ class=md-nav__link> <span class=md-ellipsis> Python Integration </span> </a> </li> <li class=md-nav__item> <a href=../../customization/versioning/ class=md-nav__link> <span class=md-ellipsis> Versioning </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5> <div class="md-nav__link md-nav__container"> <a href=../../development/ class="md-nav__link "> <span class=md-ellipsis> Development </span> </a> <label class="md-nav__link " for=__nav_5 id=__nav_5_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Development </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../development/docker/ class=md-nav__link> <span class=md-ellipsis> Docker Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../development/task-runner/ class=md-nav__link> <span class=md-ellipsis> Task Runner </span> </a> </li> <li class=md-nav__item> <a href=../../development/python-config/ class=md-nav__link> <span class=md-ellipsis> Python Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../development/git-config/ class=md-nav__link> <span class=md-ellipsis> Git Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../development/editor-config/ class=md-nav__link> <span class=md-ellipsis> Editor Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../development/documentation/ class=md-nav__link> <span class=md-ellipsis> Documentation Files </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/usrbinkat/obelisk/edit/main/vault/deployment/container-initialization.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <a href=https://github.com/usrbinkat/obelisk/raw/main/vault/deployment/container-initialization.md title="View source of this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg> </a> <h1 id=obelisk-container-initialization-and-testing-guide>Obelisk Container Initialization and Testing Guide<a class=headerlink href=#obelisk-container-initialization-and-testing-guide title="Permanent link">&para;</a></h1> <p>This comprehensive guide details the initialization process for the Obelisk container stack and provides a step-by-step testing procedure to ensure your deployment is functioning correctly. Whether you're a junior developer setting up Obelisk for the first time or a seasoned architect deploying in a production environment, this document will guide you through the entire process.</p> <blockquote> <p><strong>⚠️ IMPORTANT NOTE FOR AI-ASSISTED DEPLOYMENTS ⚠️</strong><br> When using Claude Code or similar AI assistants to help with deployment:</p> <p>Several commands in this initialization workflow exceed the 2-minute execution time limit imposed by AI assistants: - <code>task clean-all-purge</code> (or equivalent container cleanup) - <code>docker-compose build</code> (can take 5+ minutes) - <code>docker-compose pull</code> (can take 5+ minutes) - The Ollama model download step (can take 5-15 minutes depending on models and connection)</p> <p><strong>Recommendation for AI-assisted workflows</strong>: 1. Run these long-running commands manually BEFORE asking the AI to assist: <div class="language-bash highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=c1># Run these commands manually first</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>task<span class=w> </span>clean-all-purge<span class=w>  </span><span class=c1># or equivalent cleanup commands</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>docker-compose<span class=w> </span>build
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>docker-compose<span class=w> </span>pull
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=c1># Optionally pre-pull models (helpful but not required)</span>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>docker-compose<span class=w> </span>up<span class=w> </span>-d<span class=w> </span>ollama
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>docker-compose<span class=w> </span><span class=nb>exec</span><span class=w> </span>ollama<span class=w> </span>ollama<span class=w> </span>pull<span class=w> </span>llama3
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a>docker-compose<span class=w> </span><span class=nb>exec</span><span class=w> </span>ollama<span class=w> </span>ollama<span class=w> </span>pull<span class=w> </span>mxbai-embed-large
</span></code></pre></div> 2. Once these steps complete, you can engage the AI assistant for the remaining initialization and testing steps.</p> <p>This approach prevents timeout issues during AI-assisted deployments and ensures a smoother experience.</p> </blockquote> <h2 id=table-of-contents>Table of Contents<a class=headerlink href=#table-of-contents title="Permanent link">&para;</a></h2> <ul> <li><a href=#overview>Overview</a></li> <li><a href=#system-architecture>System Architecture</a></li> <li><a href=#prerequisites>Prerequisites</a></li> <li><a href=#initialization-sequence>Initialization Sequence</a></li> <li><a href=#step-by-step-setup>Step-by-Step Setup</a></li> <li><a href=#validation-and-testing>Validation and Testing</a></li> <li><a href=#troubleshooting>Troubleshooting</a></li> <li><a href=#advanced-configuration>Advanced Configuration</a></li> <li><a href=#technical-reference>Technical Reference</a></li> </ul> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p>Obelisk is a system that transforms Obsidian vaults into MkDocs Material Theme sites with AI integration capabilities through Ollama and Open WebUI. The container architecture includes several interdependent services that require a specific initialization sequence to function correctly. This document explains the technical aspects of this process and provides a reliable testing procedure.</p> <h3 id=key-components>Key Components<a class=headerlink href=#key-components title="Permanent link">&para;</a></h3> <p>The Obelisk stack consists of:</p> <ol> <li><strong>Documentation System</strong></li> <li><code>obelisk</code>: MkDocs documentation server</li> <li> <p>Documentation transformation pipeline</p> </li> <li> <p><strong>AI Services</strong></p> </li> <li><code>ollama</code>: Local LLM inference service</li> <li><code>open-webui</code>: Web interface for AI interaction</li> <li> <p><code>litellm</code>: API proxy for model management</p> </li> <li> <p><strong>RAG (Retrieval-Augmented Generation) Pipeline</strong></p> </li> <li><code>obelisk-rag</code>: RAG API service</li> <li>Vector embedding and storage</li> <li> <p>Document processing</p> </li> <li> <p><strong>Vector Database</strong></p> </li> <li><code>milvus</code>: Vector database for embeddings</li> <li><code>etcd</code>: Configuration store for Milvus</li> <li> <p><code>minio</code>: Object storage for Milvus</p> </li> <li> <p><strong>Support Services</strong></p> </li> <li><code>litellm_db</code>: PostgreSQL database for LiteLLM</li> <li><code>tika</code>: Document processing for OpenWebUI</li> <li><code>init-service</code>: Container initialization manager</li> </ol> <h2 id=system-architecture>System Architecture<a class=headerlink href=#system-architecture title="Permanent link">&para;</a></h2> <p>The system follows a microservices architecture where each component fulfills a specific role. Understanding the interactions between these services is crucial for successful deployment and troubleshooting.</p> <h3 id=service-dependency-graph>Service Dependency Graph<a class=headerlink href=#service-dependency-graph title="Permanent link">&para;</a></h3> <pre class=mermaid><code>graph TD
    subgraph "Infrastructure Layer"
        A[etcd] --&gt; D[milvus]
        B[minio] --&gt; D
    end

    subgraph "AI Layer"
        D --&gt; E[ollama]
        F[litellm_db] --&gt; G[litellm]
        E --&gt; G
    end

    subgraph "Initialization"
        H[init-service]
        G --&gt; H
        E --&gt; H
        D --&gt; H
    end

    subgraph "Application Layer"
        H --&gt; I[obelisk-rag]
        H --&gt; J[open-webui]
        H --&gt; K[obelisk]
        G --&gt; I
        G --&gt; J
        I --&gt; J
    end</code></pre> <h3 id=data-flow>Data Flow<a class=headerlink href=#data-flow title="Permanent link">&para;</a></h3> <ol> <li><strong>Initialization Flow</strong>: </li> <li>Token generation and distribution</li> <li>Model downloading and registration</li> <li> <p>Service configuration</p> </li> <li> <p><strong>Document Processing Flow</strong>:</p> </li> <li>Documents stored in vault directory</li> <li>Processed into vector embeddings</li> <li> <p>Stored in Milvus vector database</p> </li> <li> <p><strong>Query Flow</strong>:</p> </li> <li>User query received via OpenWebUI or API</li> <li>Query embedded and similar documents retrieved</li> <li>LLM generates response with document context</li> <li>Response returned to user</li> </ol> <h2 id=prerequisites>Prerequisites<a class=headerlink href=#prerequisites title="Permanent link">&para;</a></h2> <p>Before starting the initialization process, ensure you have:</p> <ul> <li>Docker Engine (version 20.10.0+)</li> <li>Docker Compose (version 2.0.0+)</li> <li>Git (for repository access)</li> <li>16GB RAM minimum (32GB recommended)</li> <li>50GB available disk space</li> <li>NVIDIA GPU with CUDA support (optional but recommended)</li> </ul> <h3 id=nvidia-setup-optional>NVIDIA Setup (Optional)<a class=headerlink href=#nvidia-setup-optional title="Permanent link">&para;</a></h3> <p>If using GPU acceleration:</p> <ol> <li> <p>Install the NVIDIA Container Toolkit: <div class="language-bash highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=c1># For Ubuntu</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=nv>distribution</span><span class=o>=</span><span class=k>$(</span>.<span class=w> </span>/etc/os-release<span class=p>;</span><span class=nb>echo</span><span class=w> </span><span class=nv>$ID$VERSION_ID</span><span class=k>)</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>curl<span class=w> </span>-s<span class=w> </span>-L<span class=w> </span>https://nvidia.github.io/nvidia-docker/gpgkey<span class=w> </span><span class=p>|</span><span class=w> </span>sudo<span class=w> </span>apt-key<span class=w> </span>add<span class=w> </span>-
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>curl<span class=w> </span>-s<span class=w> </span>-L<span class=w> </span>https://nvidia.github.io/nvidia-docker/<span class=nv>$distribution</span>/nvidia-docker.list<span class=w> </span><span class=p>|</span><span class=w> </span>sudo<span class=w> </span>tee<span class=w> </span>/etc/apt/sources.list.d/nvidia-docker.list
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>sudo<span class=w> </span>apt<span class=w> </span>update<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span>sudo<span class=w> </span>apt<span class=w> </span>install<span class=w> </span>-y<span class=w> </span>nvidia-container-toolkit
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>sudo<span class=w> </span>systemctl<span class=w> </span>restart<span class=w> </span>docker
</span></code></pre></div></p> </li> <li> <p>Verify GPU availability: <div class="language-bash highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>docker<span class=w> </span>run<span class=w> </span>--rm<span class=w> </span>--gpus<span class=w> </span>all<span class=w> </span>nvidia/cuda:11.0-base<span class=w> </span>nvidia-smi
</span></code></pre></div></p> </li> </ol> <h2 id=initialization-sequence>Initialization Sequence<a class=headerlink href=#initialization-sequence title="Permanent link">&para;</a></h2> <p>The initialization process follows a specific sequence to ensure all dependencies are properly established. This section explains the technical reasons behind this sequence.</p> <h3 id=sequence-diagram>Sequence Diagram<a class=headerlink href=#sequence-diagram title="Permanent link">&para;</a></h3> <pre class=mermaid><code>sequenceDiagram
    participant I as Infrastructure
    participant AI as AI Services
    participant Init as Initialization
    participant App as Applications

    I-&gt;&gt;I: Start etcd &amp; minio
    I-&gt;&gt;I: Start milvus (depends on etcd &amp; minio)
    I-&gt;&gt;AI: Start ollama
    I-&gt;&gt;AI: Start litellm_db
    AI-&gt;&gt;AI: Start litellm (depends on litellm_db)
    AI-&gt;&gt;Init: Run init-service
    Init-&gt;&gt;Init: Generate authentication tokens
    Init-&gt;&gt;Init: Register tokens with LiteLLM API
    Init-&gt;&gt;Init: Download and pull required models
    Init-&gt;&gt;Init: Register models with LiteLLM API
    Init-&gt;&gt;Init: Configure all services
    Init-&gt;&gt;Init: Verify initialization success
    Init-&gt;&gt;App: Start obelisk-rag (depends on successful init)
    Init-&gt;&gt;App: Start open-webui (depends on successful init)
    Init-&gt;&gt;App: Start obelisk (depends on successful init)</code></pre> <h3 id=initialization-steps-explained>Initialization Steps Explained<a class=headerlink href=#initialization-steps-explained title="Permanent link">&para;</a></h3> <ol> <li><strong>Infrastructure Setup (etcd, minio, milvus)</strong></li> <li>etcd: Provides configuration store for Milvus</li> <li>minio: Provides object storage for Milvus</li> <li>milvus: Provides vector database capabilities</li> </ol> <p>These services must start first as they constitute the fundamental data infrastructure.</p> <ol> <li><strong>AI Service Setup (ollama, litellm_db, litellm)</strong></li> <li>ollama: Provides model serving capabilities</li> <li>litellm_db: Stores API keys and configuration</li> <li>litellm: Provides API proxy for models</li> </ol> <p>These services depend on the infrastructure but must be available before initialization.</p> <ol> <li><strong>Initialization (init-service)</strong></li> <li>Handles token generation and registration</li> <li>Downloads required models</li> <li>Configures services with appropriate settings</li> <li>Verifies successful initialization</li> </ol> <p>This service orchestrates the preparation of the environment.</p> <ol> <li><strong>Application Services (obelisk-rag, open-webui, obelisk)</strong></li> <li>obelisk-rag: Provides RAG capabilities</li> <li>open-webui: Provides user interface</li> <li>obelisk: Serves documentation</li> </ol> <p>These services depend on successful initialization.</p> <h2 id=step-by-step-setup>Step-by-Step Setup<a class=headerlink href=#step-by-step-setup title="Permanent link">&para;</a></h2> <p>This section provides a detailed walkthrough of the initialization process, from repository setup to running all services.</p> <h3 id=1-environment-setup>1. Environment Setup<a class=headerlink href=#1-environment-setup title="Permanent link">&para;</a></h3> <p>Ensure you are in the Obelisk project directory before proceeding with the deployment steps.</p> <h3 id=2-clean-environment>2. Clean Environment<a class=headerlink href=#2-clean-environment title="Permanent link">&para;</a></h3> <p>Before starting, ensure a clean environment:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=c1># Clean all containers, volumes, and cached data</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>task<span class=w> </span>clean-all-purge
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=c1># Alternatively, if task is not installed</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>docker-compose<span class=w> </span>down<span class=w> </span>-v<span class=w> </span>--remove-orphans
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a>docker-compose<span class=w> </span>rm<span class=w> </span>-fsv
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a>docker-compose<span class=w> </span>down<span class=w> </span>--rmi<span class=w> </span>all
</span></code></pre></div> <h3 id=3-build-containers>3. Build Containers<a class=headerlink href=#3-build-containers title="Permanent link">&para;</a></h3> <p>Build all service containers:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>docker-compose<span class=w> </span>build
</span></code></pre></div> <p>This step compiles the container images for all services defined in the docker-compose.yaml file. It may take several minutes depending on your internet connection and machine performance.</p> <h3 id=4-start-infrastructure-services>4. Start Infrastructure Services<a class=headerlink href=#4-start-infrastructure-services title="Permanent link">&para;</a></h3> <p>Start the foundational infrastructure services in order:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=c1># Start etcd, minio, and milvus</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>docker-compose<span class=w> </span>up<span class=w> </span>-d<span class=w> </span>etcd<span class=w> </span>minio<span class=w> </span>milvus
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=c1># Verify services are running</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a>docker-compose<span class=w> </span>ps<span class=w> </span>etcd<span class=w> </span>minio<span class=w> </span>milvus
</span></code></pre></div> <p>Key technical points: - etcd must be fully operational before milvus can initialize - minio provides the object storage layer for milvus - milvus creates collections automatically upon first startup</p> <h3 id=5-start-ollama-service>5. Start Ollama Service<a class=headerlink href=#5-start-ollama-service title="Permanent link">&para;</a></h3> <div class="language-bash highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=c1># Start Ollama</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>docker-compose<span class=w> </span>up<span class=w> </span>-d<span class=w> </span>ollama
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=c1># Verify Ollama is running</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a>docker-compose<span class=w> </span>ps<span class=w> </span>ollama
</span></code></pre></div> <p>Ollama provides the foundation for LLM serving. It must be running before LiteLLM can register models.</p> <h3 id=6-start-litellm-database-and-api>6. Start LiteLLM Database and API<a class=headerlink href=#6-start-litellm-database-and-api title="Permanent link">&para;</a></h3> <div class="language-bash highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=c1># Start LiteLLM database and API service</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>docker-compose<span class=w> </span>up<span class=w> </span>-d<span class=w> </span>litellm_db<span class=w> </span>litellm
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=c1># Verify services are running</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a>docker-compose<span class=w> </span>ps<span class=w> </span>litellm_db<span class=w> </span>litellm
</span></code></pre></div> <p>Technical notes: - LiteLLM requires a PostgreSQL database for API key storage and tracking - The service initializes tables on first startup - It provides an OpenAI-compatible API for model access</p> <h3 id=7-run-the-initialization-service>7. Run the Initialization Service<a class=headerlink href=#7-run-the-initialization-service title="Permanent link">&para;</a></h3> <div class="language-bash highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=c1># Run the initialization service in foreground mode to observe the initialization process</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=c1># IMPORTANT: This command will run and exit when complete - don&#39;t interrupt it</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>docker-compose<span class=w> </span>up<span class=w> </span>init-service
</span></code></pre></div> <p>This is a critical step where: 1. Authentication tokens are generated with cryptographic security 2. Tokens are registered with the LiteLLM API using the master key 3. Required models are downloaded with retry capability: - mxbai-embed-large: For vector embeddings (~2GB) - llama3: For text generation (~4GB) 4. Models are registered with LiteLLM for proxy access 5. Configuration files are created for all services 6. Verification confirms successful initialization</p> <p>Wait for this service to complete before proceeding. The process takes approximately 5-10 minutes on first run, as it downloads models.</p> <h4 id=verifying-init-service-success>Verifying init-service Success<a class=headerlink href=#verifying-init-service-success title="Permanent link">&para;</a></h4> <p>Before proceeding to the next step, verify that the initialization service completed successfully:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=c1># Check the init-service logs - look for &quot;Initialization complete&quot; at the end</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a>docker-compose<span class=w> </span>logs<span class=w> </span>init-service<span class=w> </span><span class=p>|</span><span class=w> </span>tail<span class=w> </span>-n<span class=w> </span><span class=m>20</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=c1># Verify token file was created</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a>docker-compose<span class=w> </span><span class=nb>exec</span><span class=w> </span>litellm<span class=w> </span><span class=nb>test</span><span class=w> </span>-f<span class=w> </span>/app/tokens/api_tokens.env<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Token file exists&quot;</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Token file missing&quot;</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a><span class=c1># Check if Ollama models were successfully downloaded</span>
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a>docker-compose<span class=w> </span><span class=nb>exec</span><span class=w> </span>ollama<span class=w> </span>ollama<span class=w> </span>list
</span></code></pre></div> <p>You should see both <code>llama3</code> and <code>mxbai-embed-large</code> models in the Ollama list output. If any of these checks fail, review the full init-service logs for errors:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a>docker-compose<span class=w> </span>logs<span class=w> </span>init-service
</span></code></pre></div> <p>Common causes of initialization failure include: - Network connectivity issues during model downloads - LiteLLM API not ready when tokens are being registered - Insufficient disk space for model downloads - Token registration issues with LiteLLM</p> <p>If you see <code>Error: LiteLLM API authentication failed</code> in the logs, you may need to manually register the token:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=c1># Get the generated token</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=nv>LITELLM_TOKEN</span><span class=o>=</span><span class=k>$(</span>docker-compose<span class=w> </span><span class=nb>exec</span><span class=w> </span>-T<span class=w> </span>litellm<span class=w> </span>grep<span class=w> </span>LITELLM_API_TOKEN<span class=w> </span>/app/tokens/api_tokens.env<span class=w> </span><span class=p>|</span><span class=w> </span>cut<span class=w> </span>-d<span class=o>=</span><span class=w> </span>-f2<span class=w> </span><span class=p>|</span><span class=w> </span>tr<span class=w> </span>-d<span class=w> </span><span class=s1>&#39; \t\n\r&#39;</span><span class=k>)</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=c1># Register it with LiteLLM</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a>curl<span class=w> </span>-s<span class=w> </span>-X<span class=w> </span>POST<span class=w> </span><span class=s2>&quot;http://localhost:4000/key/generate&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a><span class=w>  </span>-H<span class=w> </span><span class=s2>&quot;Content-Type: application/json&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a><span class=w>  </span>-H<span class=w> </span><span class=s2>&quot;Authorization: Bearer </span><span class=si>${</span><span class=nv>LITELLM_MASTER_KEY</span><span class=k>:-</span><span class=nv>sk</span><span class=p>-1234</span><span class=si>}</span><span class=s2>&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a><span class=w>  </span>-d<span class=w> </span><span class=s2>&quot;{\&quot;key\&quot;: \&quot;</span><span class=nv>$LITELLM_TOKEN</span><span class=s2>\&quot;, \&quot;metadata\&quot;: {\&quot;description\&quot;: \&quot;Manual registration\&quot;}}&quot;</span>
</span></code></pre></div> <h3 id=8-start-application-services>8. Start Application Services<a class=headerlink href=#8-start-application-services title="Permanent link">&para;</a></h3> <p>After initialization completes successfully:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=c1># Start application services</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>docker-compose<span class=w> </span>up<span class=w> </span>-d<span class=w> </span>obelisk-rag<span class=w> </span>open-webui<span class=w> </span>obelisk
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=c1># Verify all services are running</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a>docker-compose<span class=w> </span>ps
</span></code></pre></div> <p>This starts the user-facing services that depend on successful initialization: - obelisk-rag: Provides the RAG API at <a href=http://localhost:8001/ >http://localhost:8001/</a> - open-webui: Provides the chat interface at <a href=http://localhost:8080/ >http://localhost:8080/</a> - obelisk: Provides the documentation at <a href=http://localhost:8000/ >http://localhost:8000/</a></p> <h2 id=validation-and-testing>Validation and Testing<a class=headerlink href=#validation-and-testing title="Permanent link">&para;</a></h2> <p>After completing the setup, it's crucial to verify that all components are functioning correctly. This section provides a comprehensive testing procedure.</p> <h3 id=automated-validation>Automated Validation<a class=headerlink href=#automated-validation title="Permanent link">&para;</a></h3> <p>Obelisk includes an automated validation script that checks initialization status:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=c1># Run the validation script</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=nb>cd</span><span class=w> </span>/workspaces/obelisk<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span>poetry<span class=w> </span>run<span class=w> </span>python<span class=w> </span>hack/test_init.py
</span></code></pre></div> <p>This script performs the following checks: - Service health verification - Token retrieval and authentication testing - Model availability verification - LiteLLM generation capability testing - OpenWebUI accessibility testing</p> <p>The script will output a detailed report of each test performed and its result.</p> <h3 id=manual-component-testing>Manual Component Testing<a class=headerlink href=#manual-component-testing title="Permanent link">&para;</a></h3> <p>For thorough validation, perform these manual checks:</p> <h4 id=1-verify-litellm-api-with-token-authentication>1. Verify LiteLLM API with Token Authentication<a class=headerlink href=#1-verify-litellm-api-with-token-authentication title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=c1># Retrieve the token</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=nv>LITELLM_TOKEN</span><span class=o>=</span><span class=k>$(</span>docker-compose<span class=w> </span><span class=nb>exec</span><span class=w> </span>-T<span class=w> </span>litellm<span class=w> </span>grep<span class=w> </span>LITELLM_API_TOKEN<span class=w> </span>/app/tokens/api_tokens.env<span class=w> </span><span class=p>|</span><span class=w> </span>cut<span class=w> </span>-d<span class=o>=</span><span class=w> </span>-f2<span class=k>)</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=c1># Test the API</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a>curl<span class=w> </span>-s<span class=w> </span>-H<span class=w> </span><span class=s2>&quot;Authorization: Bearer </span><span class=si>${</span><span class=nv>LITELLM_TOKEN</span><span class=si>}</span><span class=s2>&quot;</span><span class=w> </span>http://localhost:4000/models<span class=w> </span><span class=p>|</span><span class=w> </span>jq
</span></code></pre></div> <p>Expected output: A JSON list of available models including <code>llama3</code> and <code>mxbai-embed-large</code>.</p> <h4 id=2-test-litellm-generation>2. Test LiteLLM Generation<a class=headerlink href=#2-test-litellm-generation title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=c1># Use the token to test generation</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a>curl<span class=w> </span>-X<span class=w> </span>POST<span class=w> </span>http://localhost:4000/v1/chat/completions<span class=w> </span><span class=se>\</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=w>  </span>-H<span class=w> </span><span class=s2>&quot;Content-Type: application/json&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=w>  </span>-H<span class=w> </span><span class=s2>&quot;Authorization: Bearer </span><span class=si>${</span><span class=nv>LITELLM_TOKEN</span><span class=si>}</span><span class=s2>&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=w>  </span>-d<span class=w> </span><span class=s1>&#39;{</span>
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=s1>    &quot;model&quot;: &quot;llama3&quot;,</span>
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a><span class=s1>    &quot;messages&quot;: [{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;What is Obelisk?&quot;}],</span>
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a><span class=s1>    &quot;max_tokens&quot;: 100</span>
</span><span id=__span-15-9><a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a><span class=s1>  }&#39;</span>
</span></code></pre></div> <p>Expected output: A JSON response containing generated text about Obelisk.</p> <h4 id=3-test-obelisk-rag-api>3. Test Obelisk-RAG API<a class=headerlink href=#3-test-obelisk-rag-api title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=c1># Test the RAG API with the token</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a>curl<span class=w> </span>-X<span class=w> </span>POST<span class=w> </span>http://localhost:8001/v1/chat/completions<span class=w> </span><span class=se>\</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=w>  </span>-H<span class=w> </span><span class=s2>&quot;Content-Type: application/json&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=w>  </span>-H<span class=w> </span><span class=s2>&quot;Authorization: Bearer </span><span class=si>${</span><span class=nv>LITELLM_TOKEN</span><span class=si>}</span><span class=s2>&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=w>  </span>-d<span class=w> </span><span class=s1>&#39;{</span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a><span class=s1>    &quot;model&quot;: &quot;llama3&quot;,</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a><span class=s1>    &quot;messages&quot;: [{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;What is Obelisk?&quot;}]</span>
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a><span class=s1>  }&#39;</span>
</span></code></pre></div> <p>Expected output: A JSON response containing a generated answer, potentially with source references if documents are available.</p> <h4 id=4-test-web-interfaces>4. Test Web Interfaces<a class=headerlink href=#4-test-web-interfaces title="Permanent link">&para;</a></h4> <p>Verify all web interfaces are accessible:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=c1># Test Obelisk MkDocs</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a>curl<span class=w> </span>-s<span class=w> </span>-o<span class=w> </span>/dev/null<span class=w> </span>-w<span class=w> </span><span class=s1>&#39;%{http_code}\n&#39;</span><span class=w> </span>http://localhost:8000/
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=c1># Test OpenWebUI</span>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a>curl<span class=w> </span>-s<span class=w> </span>-o<span class=w> </span>/dev/null<span class=w> </span>-w<span class=w> </span><span class=s1>&#39;%{http_code}\n&#39;</span><span class=w> </span>http://localhost:8080/
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a>
</span><span id=__span-17-7><a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a><span class=c1># Test Obelisk-RAG stats endpoint</span>
</span><span id=__span-17-8><a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a>curl<span class=w> </span>-s<span class=w> </span>-o<span class=w> </span>/dev/null<span class=w> </span>-w<span class=w> </span><span class=s1>&#39;%{http_code}\n&#39;</span><span class=w> </span>http://localhost:8001/stats
</span></code></pre></div> <p>All should return 200 (or 302 for redirects), indicating successful access.</p> <h4 id=5-browser-interface-testing>5. Browser Interface Testing<a class=headerlink href=#5-browser-interface-testing title="Permanent link">&para;</a></h4> <p>For a complete end-to-end test, access these URLs in your browser:</p> <ul> <li>Documentation: <a href=http://localhost:8000/ >http://localhost:8000/</a></li> <li>Chat Interface: <a href=http://localhost:8080/ >http://localhost:8080/</a></li> <li>RAG Stats: <a href=http://localhost:8001/stats>http://localhost:8001/stats</a></li> </ul> <p>In the OpenWebUI interface: 1. Navigate to Settings &gt; LiteLLM 2. Verify the connection is working with the auto-generated token 3. Start a new chat and ask a question about Obelisk 4. Verify that responses are generated correctly</p> <h3 id=document-indexing-test>Document Indexing Test<a class=headerlink href=#document-indexing-test title="Permanent link">&para;</a></h3> <p>To test document indexing for RAG functionality:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=c1># Create a test document</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a>mkdir<span class=w> </span>-p<span class=w> </span>test-docs
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a><span class=nb>echo</span><span class=w> </span>-e<span class=w> </span><span class=s2>&quot;# Test Document\n\nThis is a unique test document for RAG testing.&quot;</span><span class=w> </span>&gt;<span class=w> </span>test-docs/test.md
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a><span class=c1># Copy to the RAG vault</span>
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a>docker<span class=w> </span>cp<span class=w> </span>test-docs/test.md<span class=w> </span>obelisk-rag:/app/vault/
</span><span id=__span-18-7><a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a>
</span><span id=__span-18-8><a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a><span class=c1># Wait for processing (about 10 seconds)</span>
</span><span id=__span-18-9><a id=__codelineno-18-9 name=__codelineno-18-9 href=#__codelineno-18-9></a>sleep<span class=w> </span><span class=m>10</span>
</span><span id=__span-18-10><a id=__codelineno-18-10 name=__codelineno-18-10 href=#__codelineno-18-10></a>
</span><span id=__span-18-11><a id=__codelineno-18-11 name=__codelineno-18-11 href=#__codelineno-18-11></a><span class=c1># Query for the content</span>
</span><span id=__span-18-12><a id=__codelineno-18-12 name=__codelineno-18-12 href=#__codelineno-18-12></a>curl<span class=w> </span>-X<span class=w> </span>POST<span class=w> </span>http://localhost:8001/v1/chat/completions<span class=w> </span><span class=se>\</span>
</span><span id=__span-18-13><a id=__codelineno-18-13 name=__codelineno-18-13 href=#__codelineno-18-13></a><span class=w>  </span>-H<span class=w> </span><span class=s2>&quot;Content-Type: application/json&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-18-14><a id=__codelineno-18-14 name=__codelineno-18-14 href=#__codelineno-18-14></a><span class=w>  </span>-H<span class=w> </span><span class=s2>&quot;Authorization: Bearer </span><span class=si>${</span><span class=nv>LITELLM_TOKEN</span><span class=si>}</span><span class=s2>&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-18-15><a id=__codelineno-18-15 name=__codelineno-18-15 href=#__codelineno-18-15></a><span class=w>  </span>-d<span class=w> </span><span class=s1>&#39;{</span>
</span><span id=__span-18-16><a id=__codelineno-18-16 name=__codelineno-18-16 href=#__codelineno-18-16></a><span class=s1>    &quot;model&quot;: &quot;llama3&quot;,</span>
</span><span id=__span-18-17><a id=__codelineno-18-17 name=__codelineno-18-17 href=#__codelineno-18-17></a><span class=s1>    &quot;messages&quot;: [{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;What is in the test document?&quot;}]</span>
</span><span id=__span-18-18><a id=__codelineno-18-18 name=__codelineno-18-18 href=#__codelineno-18-18></a><span class=s1>  }&#39;</span>
</span></code></pre></div> <p>If functioning correctly, the response should reference content from the test document.</p> <h2 id=troubleshooting>Troubleshooting<a class=headerlink href=#troubleshooting title="Permanent link">&para;</a></h2> <p>This section addresses common issues that may occur during the initialization process.</p> <h3 id=initialization-failures>Initialization Failures<a class=headerlink href=#initialization-failures title="Permanent link">&para;</a></h3> <p>If the init-service fails, examine the logs for specific errors:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a>docker-compose<span class=w> </span>logs<span class=w> </span>init-service
</span></code></pre></div> <p>Common initialization issues and solutions:</p> <h4 id=1-token-registration-failures>1. Token Registration Failures<a class=headerlink href=#1-token-registration-failures title="Permanent link">&para;</a></h4> <p><strong>Symptoms:</strong> - Error message: <code>Token registration failed</code> - Authentication errors in LiteLLM logs</p> <p><strong>Solutions:</strong> - Verify LiteLLM API is accessible: <code>curl -s http://localhost:4000/health</code> - Check master key configuration in docker-compose.yaml - Manually register token: <div class="language-bash highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=nv>LITELLM_TOKEN</span><span class=o>=</span><span class=k>$(</span>docker-compose<span class=w> </span><span class=nb>exec</span><span class=w> </span>-T<span class=w> </span>litellm<span class=w> </span>grep<span class=w> </span>LITELLM_API_TOKEN<span class=w> </span>/app/tokens/api_tokens.env<span class=w> </span><span class=p>|</span><span class=w> </span>cut<span class=w> </span>-d<span class=o>=</span><span class=w> </span>-f2<span class=k>)</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a>
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a>curl<span class=w> </span>-s<span class=w> </span>-X<span class=w> </span>POST<span class=w> </span><span class=s2>&quot;http://localhost:4000/key/generate&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-20-4><a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a><span class=w>  </span>-H<span class=w> </span><span class=s2>&quot;Content-Type: application/json&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-20-5><a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a><span class=w>  </span>-H<span class=w> </span><span class=s2>&quot;Authorization: Bearer </span><span class=si>${</span><span class=nv>LITELLM_MASTER_KEY</span><span class=k>:-</span><span class=nv>sk</span><span class=p>-1234</span><span class=si>}</span><span class=s2>&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-20-6><a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a><span class=w>  </span>-d<span class=w> </span><span class=s2>&quot;{\&quot;key\&quot;: \&quot;</span><span class=nv>$LITELLM_TOKEN</span><span class=s2>\&quot;, \&quot;metadata\&quot;: {\&quot;description\&quot;: \&quot;Manual registration\&quot;}}&quot;</span>
</span></code></pre></div></p> <h4 id=2-model-download-failures>2. Model Download Failures<a class=headerlink href=#2-model-download-failures title="Permanent link">&para;</a></h4> <p><strong>Symptoms:</strong> - Error message: <code>Failed to pull model 'xxx' after xx retries</code> - Missing models in <code>docker-compose exec ollama ollama list</code></p> <p><strong>Solutions:</strong> - Check Ollama logs: <code>docker-compose logs ollama</code> - Verify network connectivity within containers - Manually pull models: <div class="language-bash highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a>docker-compose<span class=w> </span><span class=nb>exec</span><span class=w> </span>ollama<span class=w> </span>ollama<span class=w> </span>pull<span class=w> </span>mxbai-embed-large
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a>docker-compose<span class=w> </span><span class=nb>exec</span><span class=w> </span>ollama<span class=w> </span>ollama<span class=w> </span>pull<span class=w> </span>llama3
</span></code></pre></div> - Check if model name has changed in recent Ollama releases</p> <h4 id=3-milvus-connection-issues>3. Milvus Connection Issues<a class=headerlink href=#3-milvus-connection-issues title="Permanent link">&para;</a></h4> <p><strong>Symptoms:</strong> - Error connecting to Milvus in initialization logs - Milvus startup warnings</p> <p><strong>Solutions:</strong> - Check Milvus logs: <code>docker-compose logs milvus</code> - Verify etcd and minio are running: <code>docker-compose ps etcd minio</code> - Restart Milvus: <code>docker-compose restart milvus</code> - Check network configuration between containers</p> <h3 id=service-specific-issues>Service-Specific Issues<a class=headerlink href=#service-specific-issues title="Permanent link">&para;</a></h3> <h4 id=ollama-issues>Ollama Issues<a class=headerlink href=#ollama-issues title="Permanent link">&para;</a></h4> <p><strong>Symptom:</strong> Ollama fails to start or respond</p> <p><strong>Solutions:</strong> - Check for GPU conflicts: <code>docker-compose logs ollama | grep -i cuda</code> - For non-GPU environments, edit docker-compose.yaml to remove GPU configuration - Check resource allocation and memory availability - Verify NVIDIA drivers are installed (for GPU usage)</p> <h4 id=litellm-issues>LiteLLM Issues<a class=headerlink href=#litellm-issues title="Permanent link">&para;</a></h4> <p><strong>Symptom:</strong> Authentication errors or model not found errors</p> <p><strong>Solutions:</strong> - Check database connectivity: <code>docker-compose logs litellm_db</code> - Verify token registration: <code>curl -s -H "Authorization: Bearer ${LITELLM_MASTER_KEY:-sk-1234}" http://localhost:4000/key/info</code> - Check model registration: <code>curl -s -H "Authorization: Bearer ${LITELLM_TOKEN}" http://localhost:4000/models</code></p> <h4 id=rag-api-issues>RAG API Issues<a class=headerlink href=#rag-api-issues title="Permanent link">&para;</a></h4> <p><strong>Symptom:</strong> No documents found, empty responses</p> <p><strong>Solutions:</strong> - Check vector database connection: <code>docker-compose logs obelisk-rag | grep -i milvus</code> - Verify document processing: <code>docker-compose exec obelisk-rag ls -la /app/vault/</code> - Check embeddings: <code>curl -s http://localhost:8001/stats</code></p> <h2 id=advanced-configuration>Advanced Configuration<a class=headerlink href=#advanced-configuration title="Permanent link">&para;</a></h2> <h3 id=environment-variable-reference>Environment Variable Reference<a class=headerlink href=#environment-variable-reference title="Permanent link">&para;</a></h3> <p>The system can be customized through environment variables in docker-compose.yaml:</p> <table> <thead> <tr> <th>Variable</th> <th>Service</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr> <td><code>LITELLM_MASTER_KEY</code></td> <td>LiteLLM</td> <td>Master key for token registration</td> <td>sk-1234</td> </tr> <tr> <td><code>LITELLM_API_TOKEN</code></td> <td>Generated</td> <td>Token for service authentication</td> <td>(auto-generated)</td> </tr> <tr> <td><code>OLLAMA_MODEL</code></td> <td>Ollama</td> <td>Default model for generation</td> <td>llama3</td> </tr> <tr> <td><code>EMBEDDING_MODEL</code></td> <td>Obelisk-RAG</td> <td>Model for vector embeddings</td> <td>mxbai-embed-large</td> </tr> <tr> <td><code>MILVUS_HOST</code></td> <td>Obelisk-RAG</td> <td>Milvus host</td> <td>milvus</td> </tr> <tr> <td><code>MILVUS_PORT</code></td> <td>Obelisk-RAG</td> <td>Milvus port</td> <td>19530</td> </tr> <tr> <td><code>CHUNK_SIZE</code></td> <td>Obelisk-RAG</td> <td>Document chunking size</td> <td>2500</td> </tr> <tr> <td><code>CHUNK_OVERLAP</code></td> <td>Obelisk-RAG</td> <td>Overlap between chunks</td> <td>500</td> </tr> <tr> <td><code>RETRIEVE_TOP_K</code></td> <td>Obelisk-RAG</td> <td>Number of chunks to retrieve</td> <td>5</td> </tr> <tr> <td><code>VECTOR_DB</code></td> <td>Obelisk-RAG</td> <td>Vector database type</td> <td>milvus</td> </tr> </tbody> </table> <h3 id=custom-model-configuration>Custom Model Configuration<a class=headerlink href=#custom-model-configuration title="Permanent link">&para;</a></h3> <p>To use different models:</p> <ol> <li> <p>Edit the <code>docker-compose.yaml</code> file to update environment variables: <div class="language-yaml highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=nt>obelisk-rag</span><span class=p>:</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a><span class=w>  </span><span class=nt>environment</span><span class=p>:</span>
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">OLLAMA_MODEL=mistral</span><span class=w>  </span><span class=c1># Change to desired model</span>
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">EMBEDDING_MODEL=nomic-embed-text</span><span class=w>  </span><span class=c1># Change to desired embedding model</span>
</span></code></pre></div></p> </li> <li> <p>Pull the model before starting services: <div class="language-bash highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a>docker-compose<span class=w> </span>up<span class=w> </span>-d<span class=w> </span>ollama
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a>docker-compose<span class=w> </span><span class=nb>exec</span><span class=w> </span>ollama<span class=w> </span>ollama<span class=w> </span>pull<span class=w> </span>mistral
</span><span id=__span-23-3><a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a>docker-compose<span class=w> </span><span class=nb>exec</span><span class=w> </span>ollama<span class=w> </span>ollama<span class=w> </span>pull<span class=w> </span>nomic-embed-text
</span></code></pre></div></p> </li> <li> <p>Update the LiteLLM configuration: <div class="language-bash highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a>docker-compose<span class=w> </span><span class=nb>exec</span><span class=w> </span>litellm<span class=w> </span>bash<span class=w> </span>-c<span class=w> </span><span class=s2>&quot;cat &gt; /app/config/litellm_config.yaml &lt;&lt; EOF</span>
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a><span class=s2>model_list:</span>
</span><span id=__span-24-3><a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a><span class=s2>  - model_name: mistral</span>
</span><span id=__span-24-4><a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a><span class=s2>    litellm_params:</span>
</span><span id=__span-24-5><a id=__codelineno-24-5 name=__codelineno-24-5 href=#__codelineno-24-5></a><span class=s2>      model: ollama/mistral</span>
</span><span id=__span-24-6><a id=__codelineno-24-6 name=__codelineno-24-6 href=#__codelineno-24-6></a><span class=s2>      api_base: http://ollama:11434</span>
</span><span id=__span-24-7><a id=__codelineno-24-7 name=__codelineno-24-7 href=#__codelineno-24-7></a><span class=s2>  - model_name: nomic-embed-text</span>
</span><span id=__span-24-8><a id=__codelineno-24-8 name=__codelineno-24-8 href=#__codelineno-24-8></a><span class=s2>    litellm_params:</span>
</span><span id=__span-24-9><a id=__codelineno-24-9 name=__codelineno-24-9 href=#__codelineno-24-9></a><span class=s2>      model: ollama/nomic-embed-text</span>
</span><span id=__span-24-10><a id=__codelineno-24-10 name=__codelineno-24-10 href=#__codelineno-24-10></a><span class=s2>      api_base: http://ollama:11434</span>
</span><span id=__span-24-11><a id=__codelineno-24-11 name=__codelineno-24-11 href=#__codelineno-24-11></a>
</span><span id=__span-24-12><a id=__codelineno-24-12 name=__codelineno-24-12 href=#__codelineno-24-12></a><span class=s2># Authentication</span>
</span><span id=__span-24-13><a id=__codelineno-24-13 name=__codelineno-24-13 href=#__codelineno-24-13></a><span class=s2>api_key: </span><span class=si>${</span><span class=nv>LITELLM_API_TOKEN</span><span class=si>}</span>
</span><span id=__span-24-14><a id=__codelineno-24-14 name=__codelineno-24-14 href=#__codelineno-24-14></a><span class=s2>EOF&quot;</span>
</span></code></pre></div></p> </li> </ol> <h3 id=persistent-document-storage>Persistent Document Storage<a class=headerlink href=#persistent-document-storage title="Permanent link">&para;</a></h3> <p>For persistent document storage:</p> <ol> <li> <p>Mount a local directory to the RAG vault: <div class="language-yaml highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=nt>obelisk-rag</span><span class=p>:</span>
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a><span class=w>  </span><span class=nt>volumes</span><span class=p>:</span>
</span><span id=__span-25-3><a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">./your-local-docs:/app/vault:ro</span><span class=w>  </span><span class=c1># Read-only mount</span>
</span></code></pre></div></p> </li> <li> <p>Restart the service: <div class="language-bash highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a>docker-compose<span class=w> </span>restart<span class=w> </span>obelisk-rag
</span></code></pre></div></p> </li> </ol> <h3 id=custom-prompt-templates>Custom Prompt Templates<a class=headerlink href=#custom-prompt-templates title="Permanent link">&para;</a></h3> <p>Customize the RAG prompt template:</p> <ol> <li> <p>Create a custom template file: <div class="language-bash highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a>cat<span class=w> </span>&gt;<span class=w> </span>rag_template.txt<span class=w> </span><span class=s>&lt;&lt; EOF</span>
</span><span id=__span-27-2><a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a><span class=s>Answer the following question based on the provided documents.</span>
</span><span id=__span-27-3><a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a><span class=s>If you don&#39;t know the answer, say so clearly.</span>
</span><span id=__span-27-4><a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a>
</span><span id=__span-27-5><a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a><span class=s>Documents:</span>
</span><span id=__span-27-6><a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a><span class=s>{{context}}</span>
</span><span id=__span-27-7><a id=__codelineno-27-7 name=__codelineno-27-7 href=#__codelineno-27-7></a>
</span><span id=__span-27-8><a id=__codelineno-27-8 name=__codelineno-27-8 href=#__codelineno-27-8></a><span class=s>Question: {{query}}</span>
</span><span id=__span-27-9><a id=__codelineno-27-9 name=__codelineno-27-9 href=#__codelineno-27-9></a>
</span><span id=__span-27-10><a id=__codelineno-27-10 name=__codelineno-27-10 href=#__codelineno-27-10></a><span class=s>Answer:</span>
</span><span id=__span-27-11><a id=__codelineno-27-11 name=__codelineno-27-11 href=#__codelineno-27-11></a><span class=s>EOF</span>
</span></code></pre></div></p> </li> <li> <p>Mount it to the container: <div class="language-yaml highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=nt>obelisk-rag</span><span class=p>:</span>
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a><span class=w>  </span><span class=nt>volumes</span><span class=p>:</span>
</span><span id=__span-28-3><a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">./rag_template.txt:/app/rag_template.txt</span>
</span><span id=__span-28-4><a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a><span class=w>  </span><span class=nt>environment</span><span class=p>:</span>
</span><span id=__span-28-5><a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">RAG_TEMPLATE_PATH=/app/rag_template.txt</span>
</span></code></pre></div></p> </li> </ol> <h2 id=technical-reference>Technical Reference<a class=headerlink href=#technical-reference title="Permanent link">&para;</a></h2> <p>This section provides technical details about the internals of the initialization process.</p> <h3 id=initialization-scripts>Initialization Scripts<a class=headerlink href=#initialization-scripts title="Permanent link">&para;</a></h3> <p>The initialization process is managed by scripts in the <code>docker/init-scripts/</code> directory:</p> <table> <thead> <tr> <th>Script</th> <th>Purpose</th> <th>Key Technical Functions</th> </tr> </thead> <tbody> <tr> <td>init-sequence.sh</td> <td>Master controller</td> <td>Orchestrates initialization sequence, performs verification</td> </tr> <tr> <td>generate-tokens.sh</td> <td>Token management</td> <td>Creates secure cryptographic tokens, registers with APIs</td> </tr> <tr> <td>download-models.sh</td> <td>Model management</td> <td>Checks model availability, pulls models, handles registration</td> </tr> <tr> <td>configure-services.sh</td> <td>Service configuration</td> <td>Creates configuration files for each service</td> </tr> </tbody> </table> <h3 id=docker-container-specifications>Docker Container Specifications<a class=headerlink href=#docker-container-specifications title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Container</th> <th>Base Image</th> <th>Key Dependencies</th> <th>Function</th> </tr> </thead> <tbody> <tr> <td>init-service</td> <td>python:3.12-slim</td> <td>curl, bash</td> <td>Performs initialization</td> </tr> <tr> <td>ollama</td> <td>ollama/ollama:latest</td> <td>CUDA (optional)</td> <td>Serves LLMs</td> </tr> <tr> <td>litellm</td> <td>ghcr.io/berriai/litellm:main-latest</td> <td>PostgreSQL</td> <td>API proxy</td> </tr> <tr> <td>milvus</td> <td>milvusdb/milvus:v2.5.10</td> <td>etcd, minio</td> <td>Vector database</td> </tr> <tr> <td>obelisk-rag</td> <td>python:3.12-slim</td> <td>langchain, fastapi</td> <td>RAG service</td> </tr> </tbody> </table> <h3 id=token-generation-mechanism>Token Generation Mechanism<a class=headerlink href=#token-generation-mechanism title="Permanent link">&para;</a></h3> <p>The token generation process uses OpenSSL to create cryptographically secure tokens:</p> <ul> <li>LiteLLM API tokens: 12 bytes of hexadecimal with <code>sk-</code> prefix</li> <li>OpenWebUI tokens: 32 bytes in base64 encoding</li> </ul> <p>These tokens are stored in a shared volume at <code>/app/tokens/api_tokens.env</code> and are accessible to all services that require authentication.</p> <h3 id=verification-process>Verification Process<a class=headerlink href=#verification-process title="Permanent link">&para;</a></h3> <p>The initialization performs an exhaustive verification:</p> <ol> <li>Token file existence and format validation</li> <li>Ollama API accessibility and response validation</li> <li>LiteLLM token authentication verification</li> <li>Model download confirmation</li> <li>Model registration confirmation with LiteLLM API</li> </ol> <p>This multi-step verification ensures the system is fully operational before allowing application services to start.</p> <h3 id=networking-architecture>Networking Architecture<a class=headerlink href=#networking-architecture title="Permanent link">&para;</a></h3> <p>The services communicate through a Docker bridge network:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a>networks:
</span><span id=__span-29-2><a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a>  ollama-net:
</span><span id=__span-29-3><a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a>    driver: bridge
</span></code></pre></div> <p>Service discovery is handled through Docker's DNS resolution, allowing services to reference each other by container name (e.g., <code>http://ollama:11434</code>).</p> <h3 id=data-volumes>Data Volumes<a class=headerlink href=#data-volumes title="Permanent link">&para;</a></h3> <p>The system uses these persistent volumes:</p> <table> <thead> <tr> <th>Volume</th> <th>Purpose</th> <th>Services Using</th> </tr> </thead> <tbody> <tr> <td>ollama</td> <td>Model storage</td> <td>ollama</td> </tr> <tr> <td>models</td> <td>Shared models</td> <td>ollama, open-webui</td> </tr> <tr> <td>milvus_data</td> <td>Vector database</td> <td>milvus</td> </tr> <tr> <td>rag-data</td> <td>RAG database</td> <td>obelisk-rag</td> </tr> <tr> <td>rag-vault</td> <td>Document storage</td> <td>obelisk-rag</td> </tr> <tr> <td>tokens</td> <td>Authentication tokens</td> <td>multiple</td> </tr> <tr> <td>config</td> <td>Service configurations</td> <td>multiple</td> </tr> </tbody> </table> <h2 id=conclusion>Conclusion<a class=headerlink href=#conclusion title="Permanent link">&para;</a></h2> <p>This comprehensive guide has walked you through the technical details of the Obelisk container initialization and testing process. By following this procedure, you can ensure a reliable and fully functional deployment of the Obelisk stack.</p> <p>The initialization process has been carefully designed to handle dependencies, ensure proper configuration, and validate the functionality of all components. By understanding the purpose and inner workings of each step, you can effectively troubleshoot issues and customize the system to your specific needs.</p> <p>For additional help or to report issues, please refer to the <a href=https://github.com/usrbinkat/obelisk>GitHub repository</a> or submit a detailed bug report with logs and system information.</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="April 23, 2025 22:23:09">April 23, 2025</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Created> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="April 22, 2025 03:50:19">April 22, 2025</span> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> </div> <div class=md-social> <a href=https://github.com/usrbinkat target=_blank rel=noopener title=GitHub class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-consent data-md-component=consent id=__consent hidden> <div class=md-consent__overlay></div> <aside class=md-consent__inner> <form class="md-consent__form md-grid md-typeset" name=consent> <h4>Cookie consent</h4> <p>We use cookies to recognize your repeated visits and preferences, as well as to analyze traffic and understand where our visitors are coming from.</p> <input class=md-toggle type=checkbox id=__settings> <div class=md-consent__settings> <ul class=task-list> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=github checked> <span class=task-list-indicator></span> GitHub </label> </li> </ul> </div> <div class=md-consent__controls> <button class="md-button md-button--primary">Accept</button> <label class=md-button for=__settings>Manage settings</label> </div> </form> </aside> </div> <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.indexes", "navigation.top", "navigation.footer", "navigation.path", "toc.follow", "toc.integrate", "search.suggest", "search.highlight", "search.share", "content.tabs.link", "content.code.annotation", "content.code.copy", "content.action.edit", "content.action.view", "header.autohide"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "0.1.0", "provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.c8b220af.min.js></script> <script src=../../javascripts/extra.js></script> <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>